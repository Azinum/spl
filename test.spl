// test.spl

memory g 1024;

fn write(fd, buf, count) { let _ syscall3(1, fd, buf, count); }

fn putc(_fd, _ch) {
  let fd _fd;
  let ch _ch;
  write(fd, @ch, 1);
}

fn puts(_fd, _str) {
  let fd _fd;
  let str _str;
  while < 0 load8 str {
    putc(fd, load8 str);
    = @str +1 str;
  }
}

fn strlen(_str) {
  let str _str;
  let length 0;
  while < 0 load8 str {
    = @length +1 length;
    = @str +1 str;
  }
  length;
}

fn memset(_ptr, _c, _n) {
  let ptr _ptr;
  let c _c;
  let n _n;
  let count 0;
  while < count n {
    store8 ptr _c; = @ptr +1 ptr;
    = @count +1 count;
  }
}

fn add(a, b) + a b;

fn main {
  puts(1, "Hello World\n");
  0;
}
